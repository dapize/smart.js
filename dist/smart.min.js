!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Mustache=t()}(this,(function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test;var o=/\S/;function a(e){return!function(e,t){return i.call(e,t)}(o,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,l=/\s+/,p=/\s*=/,d=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function f(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function m(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},f.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n,i,o=this.cache;if(o.hasOwnProperty(e))t=o[e];else{for(var a,u,c,l=this,p=!1;l;){if(e.indexOf(".")>0)for(a=l.view,u=e.split("."),c=0;null!=a&&c<u.length;)c===u.length-1&&(p=s(a,u[c])||(n=a,i=u[c],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(i))),a=a[u[c++]];else a=l.view[e],p=s(l.view,e);if(p){t=a;break}l=l.parent}o[e]=t}return r(t)&&(t=t.call(this.view)),t},m.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},m.prototype.parse=function(e,r){var s=this.templateCache,i=e+":"+(r||y.tags).join(":"),o=void 0!==s,u=o?s.get(i):void 0;return null==u&&(u=function(e,r){if(!e)return[];var s,i,o,u=!1,g=[],m=[],b=[],v=!1,x=!1,w="",P=0;function C(){if(v&&!x)for(;b.length;)delete m[b.pop()];else b=[];v=!1,x=!1}function E(e){if("string"==typeof e&&(e=e.split(l,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(n(e[0])+"\\s*"),i=new RegExp("\\s*"+n(e[1])),o=new RegExp("\\s*"+n("}"+e[1]))}E(r||y.tags);for(var O,M,A,j,k,N,T=new f(e);!T.eos();){if(O=T.pos,A=T.scanUntil(s))for(var S=0,L=A.length;S<L;++S)a(j=A.charAt(S))?(b.push(m.length),w+=j):(x=!0,u=!0,w+=" "),m.push(["text",j,O,O+1]),O+=1,"\n"===j&&(C(),w="",P=0,u=!1);if(!T.scan(s))break;if(v=!0,M=T.scan(h)||"name",T.scan(c),"="===M?(A=T.scanUntil(p),T.scan(p),T.scanUntil(i)):"{"===M?(A=T.scanUntil(o),T.scan(d),T.scanUntil(i),M="&"):A=T.scanUntil(i),!T.scan(i))throw new Error("Unclosed tag at "+T.pos);if(k=">"==M?[M,A,O,T.pos,w,P,u]:[M,A,O,T.pos],P++,m.push(k),"#"===M||"^"===M)g.push(k);else if("/"===M){if(!(N=g.pop()))throw new Error('Unopened section "'+A+'" at '+O);if(N[1]!==A)throw new Error('Unclosed section "'+N[1]+'" at '+O)}else"name"===M||"{"===M||"&"===M?x=!0:"="===M&&E(A)}if(C(),N=g.pop())throw new Error('Unclosed section "'+N[1]+'" at '+T.pos);return function(e){for(var t,r=[],n=r,s=[],i=0,o=e.length;i<o;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),s.push(t),n=t[4]=[];break;case"/":s.pop()[5]=t[2],n=s.length>0?s[s.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],s=0,i=e.length;s<i;++s)(t=e[s])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(m))}(e,r),o&&s.set(i,u)),u},m.prototype.render=function(e,t,r,n){var s=this.parse(e,n),i=t instanceof g?t:new g(t,void 0);return this.renderTokens(s,i,r,e,n)},m.prototype.renderTokens=function(e,t,r,n,s){for(var i,o,a,u="",c=0,l=e.length;c<l;++c)a=void 0,"#"===(o=(i=e[c])[0])?a=this.renderSection(i,t,r,n):"^"===o?a=this.renderInverted(i,t,r,n):">"===o?a=this.renderPartial(i,t,r,s):"&"===o?a=this.unescapedValue(i,t):"name"===o?a=this.escapedValue(i,t):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(u+=a);return u},m.prototype.renderSection=function(e,n,s,i){var o=this,a="",u=n.lookup(e[1]);if(u){if(t(u))for(var c=0,l=u.length;c<l;++c)a+=this.renderTokens(e[4],n.push(u[c]),s,i);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)a+=this.renderTokens(e[4],n.push(u),s,i);else if(r(u)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(n.view,i.slice(e[3],e[5]),(function(e){return o.render(e,n,s)})))&&(a+=u)}else a+=this.renderTokens(e[4],n,s,i);return a}},m.prototype.renderInverted=function(e,r,n,s){var i=r.lookup(e[1]);if(!i||t(i)&&0===i.length)return this.renderTokens(e[4],r,n,s)},m.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),s=e.split("\n"),i=0;i<s.length;i++)s[i].length&&(i>0||!r)&&(s[i]=n+s[i]);return s.join("\n")},m.prototype.renderPartial=function(e,t,n,s){if(n){var i=r(n)?n(e[1]):n[e[1]];if(null!=i){var o=e[6],a=e[5],u=e[4],c=i;return 0==a&&u&&(c=this.indentPartial(i,u,o)),this.renderTokens(this.parse(c,s),t,n,c)}}},m.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},m.prototype.escapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return y.escape(r)},m.prototype.rawValue=function(e){return e[1]};var y={name:"mustache.js",version:"4.0.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){b.templateCache=e},get templateCache(){return b.templateCache}},b=new m;return y.clearCache=function(){return b.clearCache()},y.parse=function(e,t){return b.parse(e,t)},y.render=function(e,r,n,s){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return b.render(e,r,n,s)},y.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return u[e]}))},y.Scanner=f,y.Context=g,y.Writer=m,y})),function(e){"use strict";const t={initValues:function(e){e.missings={required:[],optional:[]},e.different={},e.errors=[],e.compiled={}},objLiteral:function(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()},typesAccepted:["string","number","boolean","array","object"],getType:{obj:function(e){return Array.isArray(e)?"array":typeof e},schema:function(e){let r;if(Array.isArray(e))r="mixed";else if(t.objLiteral(e))r=e.hasOwnProperty("type")?e.type:"object";else{const n=typeof e;r="string"===n&&-1!==t.typesAccepted.indexOf(e)?e:n}return r}},reg:function(e,t,r){let n=!1;return r?e.hasOwnProperty(r)||(e[r]=t,n=!0):(e.push(t),n=!0),n},mergeProps:function(e,t,r){const n=t.errors;let s,i;n.length&&(e.errors=e.errors.concat(n)),["required","optional"].forEach((function(r){s=t.missings[r],s.length&&(e.missings[r]=e.missings[r].concat(s))})),["different","compiled"].forEach((function(n){i=t[n],Object.keys(i).length&&(e[n].hasOwnProperty(r)||(e[n][r]={}),e[n][r]=i)}))}};function r(e){if(!e)return console.log("Object missing ",e);this.schema=Object.assign({},e),t.initValues(this)}r.prototype.compile=function(e){return e&&this.validate(e),!this.missings.required.length&&this.compiled},r.prototype.validate=function(e){t.initValues(this);const n=this.schema,s=this;let i=!0;return Object.keys(n).forEach((function(o){const a=n[o],u=t.getType.schema(a);if(e.hasOwnProperty(o)){const n=e[o],c=t.getType.obj(n);switch(u){case"string":case"number":case"boolean":case"array":u!==c?(a.required&&(i=!1),t.reg(s.different,{current:c,expected:u,value:n},o)):t.reg(s.compiled,n,o);break;case"object":if("object"===c)if(a.hasOwnProperty("properties")){const e=new r(a.properties);e.validate(n)||(i=!1),t.mergeProps(s,e,o)}else t.reg(s.compiled,n,o);else a.required&&(i=!1,t.reg(s.different,{current:c,expected:u,value:n},o));break;case"mixed":!a.filter((function(e){return e===c})).length&&a.required?(i=!1,t.reg(s.different,{current:c,expected:a,value:n},o)):t.reg(s.compiled,n,o);break;default:console.log("format type dont accepted: "+u),i=!1}}else{let e;a.required?(i=!1,e="required"):e="optional",t.reg(s.missings[e],o),a.default&&(s.compiled[o]=a.default)}})),i},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=r),exports.Schema=r):e.Schema=r}(this),function(e){"use strict";const t={getNums:function(e,t){const r={};return Object.keys(e).forEach((function(n){r[n]="width"===t&&e[n].direct?0:e[n][t]})),r},haveBreakPoint:function(e){return-1!==e.indexOf("@")},prepareParam:function(e){let t;const r=this.haveBreakPoint(e);if(r){const r=e.split("@");e=r[0],t=r[1]}else t="xs";return{widthBp:r,numbers:e,breakPoints:t}},stringToNumber:function(e){return"string"==typeof e?parseFloat(e):e},calPercentage:function(e,t){return 100*e/t+"%"},processedNumber:function(e){let t;return-1!==e.indexOf("/")?(t=e.split("/"),t=this.calPercentage(this.stringToNumber(t[0]),this.stringToNumber(t[1]))):t="auto"===e?"auto":-1!==e.indexOf(".")?e+"px":"0"===e?e:e+"px",t},debug:function(e){let t,r=e.print||!1;switch(e.type||"l"){case"l":t="log";break;case"e":t="error",r=!0;break;case"w":t="warn";break;case"i":t="info"}if(r){let r=Object.create(null);r.type=t,e.message&&(r.message=e.message),e.data&&(r.data=e.data),console[t](r)}},regError:function(e,t){const r=new Error;return r.name=e,r.message=t,this.debug({type:"e",message:r})},processors:{cols:{set:"setCols",build:"buildCols",ruleCss:"width"},pad:{set:"setPads",build:"buildPads",ruleCss:"padding"},padt:{set:"setPadTop",build:"buildPadTop",ruleCss:"padding-top"},padr:{set:"setPadRight",build:"buildPadRight",ruleCss:"padding-right"},padb:{set:"setPadBottom",build:"buildPadBottom",ruleCss:"padding-bottom"},padl:{set:"setPadLeft",build:"buildPadLeft",ruleCss:"padding-left"},mar:{set:"setMars",build:"buildMars",ruleCss:"margin"},mart:{set:"setMarTop",build:"buildMarTop",ruleCss:"margin-top"},marr:{set:"setMarRight",build:"buildMarRight",ruleCss:"margin-right"},marb:{set:"setMarBottom",build:"buildMarBottom",ruleCss:"margin-bottom"},marl:{set:"setMarLeft",build:"buildMarLeft",ruleCss:"margin-left"},flex:{set:"setFlex",build:"buildFlex",ruleCss:"display: flex"}},flexpv:{jc:"justify-content",ai:"align-items",ce:"center",fs:"flex-start",fe:"flex-end",sb:"space-between",sa:"space-around",fw:"flex-wrap",nw:"nowrap",w:"wrap",wr:"wrap-reverse",fd:"flex-direction",r:"row",rr:"row-reverse",co:"column",cor:"column-reverse"},createStyles:function(e,t,r){const n=r.sizes,s=r.prefix,i=this.processors[e].ruleCss,o={};let a,u,c,l,p,d,h=!1;return Object.keys(t).forEach((function(r){p=s+e+"-"+t[r].name,p=p.replace(/\//g,"\\/").replace(/:/g,"\\:").replace("@","\\@").split(".").join("_"),d="flex"===e?t[r].value+";display: flex;":i+":"+t[r].value,a="@media screen and ",-1===r.indexOf("-")?n[r]?a+="(min-width: "+n[r]+"px)":(a="."+p+"{"+d+"}",h=!0):(u=r.split("-"),c=u[0],c&&(a+="(min-width: "+n[c]+"px) and "),l=u[1],a+="(max-width: "+(n[l]-1)+"px)"),h||(a+="{."+p+"{"+d+"}}"),h=!1,o[p]=a})),this.debug({type:"i",print:r.debug,message:"Creating / Created Styles: ",data:[t,o]}),o},createScopeStyles:function(e){let t=document.getElementById("layouter");return null===t&&(t=document.createElement("style"),t.appendChild(document.createTextNode("")),document.body.appendChild(t),t.id="layouter"),this.debug({type:"i",print:e.debug,message:"Bridge layouter created and inserted in the DOM",data:t}),e.bridge?t.sheet:{insertRule:function(e){t.innerHTML+="\n"+e},rules:[]}},insertRules:function(e,t){const r=t.scope,n=t.prefix;Object.keys(e).forEach((function(s){t.styles.hasOwnProperty(n+s)||(r.insertRule(e[s],r.rules?r.rules.length:0),t.styles[n+s]=e[s])})),this.debug({type:"i",print:t.debug,message:"Inserting Styles: ",data:e})},replaceList:[["/",""],["\\","/"],["/:",":"],["\\:",":"],["\\@","@"],["/@","@"]],addClasses:function(e,t,r){e.forEach((function(e){t.classList.contains(e)?this.debug({type:"w",print:r.debug,message:"The class name '"+e+"' already exists in the node and will not be added: ",data:t}):t.classList.add(e)})),this.debug({type:"i",print:r.debug,message:"Adding classes to the Node: ",data:{classesNames:e,node:t}})},nameCleaner:function(e){const t=this,r={};return Object.keys(e).forEach((function(n){let s=n;t.replaceList.forEach((function(e){s=s.split(e[0]).join(e[1])})),r[s]=e[n]})),r},buildCss:function(e){const t=this.createStyles(e.type,e.bps,e.instance);return e.deep&&this.insertRules(t,e.instance),this.nameCleaner(t)},settingCss:function(e){const t=this.buildCss(Object.assign({deep:!0},e));this.addClasses(Object.keys(t),e.node,e.instance)},buildPadsAndMargs:function(e,t,r,n){if(void 0===e)return this.regError("Parameter Missing","Don't exists a value determined");this.debug({type:"i",print:r.debug,message:"Building the 'pads or margs': "+e});const s=this,i={};let o,a,u,c;return Array.isArray(e)||(e=e.split(" ")),e.forEach((function(e){o=s.prepareParam(e),a=o.numbers,c=o.breakPoints,u=a.split("-").map((function(e){return s.processedNumber(e)})).join(" "),i.hasOwnProperty(c)?i[c].value+=";"+u:i[c]={name:e,value:u}})),this.buildCss({type:t,bps:i,instance:r,deep:void 0===n||n})},padsAndMargs:function(e,t,r,n){if(!e)return this.regError("Non-existent Node","Don't exists the Node for processing.");this.debug({type:"i",print:n.debug,message:"Processing the '"+t+"' to the Node:",data:e});const s=r||n.getParameters(e);if(!s.hasOwnProperty(t))return this.regError("Parameter Missing","Don't exists the param '"+t+"' determined");const i=this.buildPadsAndMargs(s[t],t,n);this.addClasses(Object.keys(i),e,n),e.removeAttribute(t)}};function r(e){if(!e.hasOwnProperty("breakPoints"))return t.regError("Configuration Missing","¡configuration missing! :V");this.prefix=e.prefix?e.prefix+"-":"";const r=e.breakPoints;this.breakPoints=Object.keys(r),this.sizes=t.getNums(r,"width"),this.cols=t.getNums(r,"cols"),this.scope=t.createScopeStyles(Object.assign({bridge:!0},e)),this.styles={},this.debug=e.debug||!1}"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(module.exports=t),r.version="1.6.1Beta",r.prototype.set=function(e){if(!e)return t.regError("Non-existent Node","Don't exists the Node for processing.");t.debug({type:"i",print:this.debug,message:"Starting the 'set' of the Node:",data:e});const r=this.getParameters(e),n=Object.keys(r),s=this;n.length?n.forEach((function(n){s[t.processors[n].set](e,r)})):t.regError("Parameter Missing","don't exists any parameter to process")},r.prototype.build=function(e){if(!Node)return t.regError("Non-existent Object","Don't exists the object for processing.");t.debug({type:"i",print:this.debug,message:"Starting building the attributes:",data:e});const r={},n=this;let s;return Object.keys(e).forEach((function(i){s=t.processors[i],s&&(r[i]=n[s.build](e[i]))})),!!Object.keys(r).length&&r},r.prototype.getParameters=function(e){const r={},n=e.attributes,s=Object.keys(t.processors);return Array.prototype.forEach.call(n,(function(e){-1!==s.indexOf(e.name)&&""!==e.value&&(r[e.name]=e.value.trim().split(" "))})),t.debug({type:"i",print:this.debug,message:"Getting / Getted parameters of the Node:",data:{parameters:r,node:e}}),r},r.prototype.buildCols=function(e,r){if(void 0===e)return t.regError("Parameter Missing","Don't exists 'cols' determined");t.debug({type:"i",print:this.debug,message:"Building the 'cols': "+e});const n=this;let s,i,o,a,u,c={};return Array.isArray(e)||(e=e.split(" ")),e.forEach((function(e){o=e,u=t.prepareParam(e),i=u.breakPoints,-1!==(e=u.numbers).indexOf("/")?s=e.split("/"):u.widthBp?-1===i.indexOf("-")?s=[e,n.cols[i]]:t.regError("SyntaxError","You can't determine a 'until breakpoint' when use the explicit columns max"):s=[e,n.cols.xs],a=t.calPercentage(s[0],s[1]),c[i]={name:o,value:a}})),t.buildCss({type:"cols",bps:c,instance:this,deep:void 0===r||r})},r.prototype.setCols=function(e,r){if(!e)return t.regError("Non-existent Node","Don't exists the Node for processing.");t.debug({type:"i",print:this.debug,message:"Processing the 'cols' to the Node:",data:e});const n=r||this.getParameters(e);if(!n.hasOwnProperty("cols"))return t.regError("Parameter Missing","Don't exists 'cols' determined");const s=this.buildCols(n.cols);t.addClasses(Object.keys(s),e,this),e.removeAttribute("cols")},r.prototype.buildPads=function(e,r){return t.buildPadsAndMargs(e,"pad",this,r)},r.prototype.setPads=function(e,r){t.padsAndMargs(e,"pad",r,this)},r.prototype.buildPadTop=function(e,r){return t.buildPadsAndMargs(e,"padt",this,r)},r.prototype.setPadTop=function(e,r){t.padsAndMargs(e,"padt",r,this)},r.prototype.buildPadRight=function(e,r){return t.buildPadsAndMargs(e,"padr",this,r)},r.prototype.setPadRight=function(e,r){t.padsAndMargs(e,"padr",r,this)},r.prototype.buildPadBottom=function(e,r){return t.buildPadsAndMargs(e,"padb",this,r)},r.prototype.setPadBottom=function(e,r){t.padsAndMargs(e,"padb",r,this)},r.prototype.buildPadLeft=function(e,r){return t.buildPadsAndMargs(e,"padl",this,r)},r.prototype.setPadLeft=function(e,r){t.padsAndMargs(e,"padl",r,this)},r.prototype.buildMars=function(e,r){return t.buildPadsAndMargs(e,"mar",this,r)},r.prototype.setMars=function(e,r){t.padsAndMargs(e,"mar",r,this)},r.prototype.buildMarTop=function(e,r){return t.buildPadsAndMargs(e,"mart",this,r)},r.prototype.setMarTop=function(e,r){t.padsAndMargs(e,"mart",r,this)},r.prototype.buildMarRight=function(e,r){return t.buildPadsAndMargs(e,"marr",this,r)},r.prototype.setMarRight=function(e,r){t.padsAndMargs(e,"marr",r,this)},r.prototype.buildMarBottom=function(e,r){return t.buildPadsAndMargs(e,"marb",this,r)},r.prototype.setMarBottom=function(e,r){t.padsAndMargs(e,"marb",r,this)},r.prototype.buildMarLeft=function(e,r){return t.buildPadsAndMargs(e,"marl",this,r)},r.prototype.setMarLeft=function(e,r){t.padsAndMargs(e,"marl",r,this)},r.prototype.buildFlex=function(e,r){if(void 0===e)return t.regError("Parameter Missing","Don't exists 'flex' determined");t.debug({type:"i",print:this.debug,message:"Building the 'flex': "+e});let n,s,i,o,a,u,c,l={};return Array.isArray(e)||(e=e.split(" ")),e.forEach((function(e){return s=e,i=t.prepareParam(e),n=i.breakPoints,e=i.numbers,o=e.split(":"),u=o[0],t.flexpv.hasOwnProperty(u)?(c=o[1],t.flexpv.hasOwnProperty(c)?(a=t.flexpv[u]+":"+t.flexpv[o[1]],void(l.hasOwnProperty(n)?(1!==s.indexOf("@")&&(s=s.split("@")[0]),l[n].name=l[n].name.split("@")[0]+"-"+s+"@"+n,l[n].value+=";"+a):l[n]={name:s,value:a})):t.regError("Non-existent Alias","Don't exists the alias '"+c+"' in Flex vault.")):t.regError("Non-existent Alias","Don't exists the alias '"+u+"' in Flex vault.")})),t.buildCss({type:"flex",bps:l,instance:this,deep:void 0===r||r})},r.prototype.setFlex=function(e,r){if(!e)return t.regError("Non-existent Node","Don't exists the Node for processing.");t.debug({type:"i",print:this.debug,message:"Processing the 'flex' parameter to the Node:",data:e});const n=r||this.getParameters(e);if(!n.hasOwnProperty("flex"))return t.regError("Parameter Missing","Don't exists 'flex' determinated.");const s=this.buildFlex(n.flex);t.addClasses(Object.keys(s),e,this),e.removeAttribute("flex")},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=r),exports.Layouter=r):e.Layouter=r}(this),function(e){"use strict";function t(){this.events=null}function r(e){e||(e={}),t.call(this),this.components=new Map,e.hasOwnProperty("layouter")?r.prototype.layouter=new Layouter(e.layouter):this.utils.regError("Falta configuración","Se necesita designar la configuración del layouter.")}t.prototype.addEventListener=function(e,t){this.events||(this.events={}),this.events[e]?this.events[e].push(t):this.events[e]=[t]},t.prototype.dispatchEvent=function(e,t,r){if(this.events&&this.events[e]){const n=this;this.events[e].forEach((function(e){e.call(n,t,r)}))}},t.prototype.removeEventListener=function(e,t){if(this.events&&this.events[e]){const r=this.events[e];if(r){if(void 0===t)delete this.events[e];else{const n=r.length;let s;for(s=0;s<n;s++)if(r[s]===t){this.events[e].splice(s,1),this.events[e].length||delete this.events[e];break}}Object.keys(this.events).length||(this.events=null)}}},r.prototype=Object.create(t.prototype),r.prototype.constructor=r;const n={regError:function(e,t){const r=new Error;return r.name=e,r.message=t,console.log(r),r},toArray:function(e){return Array.prototype.map.call(e,(function(e){return e}))},attrsCleaner:function(e,t,r){const n=e.shift();if("[]"===n.value&&t.removeAttribute(n.name),!e.length)return r();this.attrsCleaner(e,t,r)},nodeCleaner:function(e,t){const r=this,n=e.shift();let s=n.attributes;if(!s.length)return t();s=this.toArray(s),this.attrsCleaner(s,n,(function(){if(!e.length)return t();r.nodeCleaner(e,t)}))},layouter:function(e,t,r){const n=t.querySelectorAll("[cols], [pad], [padt], [padr], [padb], [padl], [mar], [mart], [marr], [marb], [marl], [flex]");if(!n.length)return r();const s=new Set;Array.prototype.forEach.call(n,(function(e){"c-"!==e.nodeName.toLowerCase().substring(0,2)&&s.add(e)})),s.forEach((function(t){e.set(t)})),r()},notify:function(e,t,r,n,s){e.dispatchEvent("component:"+r,n,s),setTimeout((function(){t.dispatchEvent(r,s)}),0)}};r.prototype.utils=n,r.prototype.registerComponent=function(e,r){if("string"!=typeof e)return this.utils.regError("Nombre Inadecuado","No se declaró correctamente el nombre del componente a registrar.");if(this.components.has(e))return this.utils.regError("Componente Duplicado",'Ya se había registrado el componente "'+e+'".');function n(){t.call(this,e)}r||(r={}),n.prototype=Object.create(t.prototype),n.prototype.constructor=n;const s={schema:r.schema?new Schema(r.schema):null,template:r.template||null,script:r.script||null,constructor:n,instance:new n};if(this.components.set(e,s),r.hasOwnProperty("styles")){const t=document.createElement("style");t.type="text/css",t.innerHTML=r.styles,t.id=e,document.body.appendChild(t)}const i=Object.assign({},s);return delete i.constructor,delete i.instance,this.utils.notify(this,s.instance,"registered",e,i),s.instance},r.prototype.createComponent=function(e,t){if(t||(t={}),!this.components.has(e))return this.utils.regError("Componente Inexistente",'No se puede crear el componente "'+e+'", porque no está registrado.');const r=this,n=this.components.get(e);let s=null;if(n.hasOwnProperty("schema")){if(!n.schema.validate(t))return this.utils.regError("Data inválida",'No fué posible crear el componente "'+e+'", ya que su data es inválida.');s=n.schema.compile(t)}if(n.hasOwnProperty("template")){const t=document.createElement("div");t.innerHTML=s?Mustache.render(n.template,s):n.template;let i=this.utils.toArray(t.querySelectorAll("*"));this.utils.nodeCleaner(i,(function(){r.utils.layouter(r.layouter,t,(function(){const i=t.querySelector("[component]");i&&(n.script.call(r,i,s),i.removeAttribute("component")),r.utils.notify(r,n.instance,"created",e,t.firstChild)}))}))}else n.hasOwnProperty("script")&&n.script.call(r,null,s),this.utils.notify(this,n.instance,"created",e,null);return n.instance},"object"==typeof module&&module.exports?module.exports=r:e.Smart=r}(this);